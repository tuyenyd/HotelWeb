<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Thanh toán - Quản lý Khách sạn</title>
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">

    <style>
        /* CSS tùy chỉnh cho trang thanh toán */
        .summary-table {
            font-size: 0.9rem;
        }
        .summary-table th, .summary-table td {
            padding: 0.5rem 0.25rem;
            border-bottom: 1px dashed #eee;
        }
        .summary-total {
            font-size: 1rem;
            font-weight: bold;
        }
        .summary-total .label {
            color: #555;
        }
        .summary-total .value {
            float: right;
        }
        .total-due {
            font-size: 2rem;
            font-weight: bold;
            color: #d9534f; /* Màu đỏ */
        }
        .payment-card {
            position: sticky;
            top: 80px; /* Giữ cố định khi cuộn */
        }
    </style>
</head>

<body>

<main id="main" class="main">

    <div class="pagetitle">
        <h1>Thanh toán & Check-out</h1>
        <nav>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Trang chủ</a></li>
                <li class="breadcrumb-item">Quản lý Đặt phòng</li>
                <li class="breadcrumb-item active">Thanh toán</li>
            </ol>
        </nav>
    </div><section class="section profile">
    <div class="row">

        <div class="col-lg-8">

            <div class="card">
                <div class="card-body pt-3">
                    <h5 class="card-title">Thông tin Đặt phòng (BK-98765)</h5>
                    <div class="row">
                        <div class="col-lg-6 mb-2">
                            <div class="fw-bold">Khách hàng:</div>
                            Nguyễn Văn A (KH-00123)
                        </div>
                        <div class="col-lg-6 mb-2">
                            <div class="fw-bold">Điện thoại:</div>
                            0987.654.321
                        </div>
                        <div class="col-lg-6 mb-2">
                            <div class="fw-bold">Phòng:</div>
                            101 (Deluxe Hướng Biển)
                        </div>
                        <div class="col-lg-6 mb-2">
                            <div class="fw-bold">Trạng thái:</div>
                            <span class="badge bg-info">Đang ở (Checked-in)</span>
                        </div>
                        <div class="col-lg-6 mb-2">
                            <div class="fw-bold">Nhận phòng:</div>
                            27/10/2025
                        </div>
                        <div class="col-lg-6 mb-2">
                            <div class="fw-bold">Trả phòng:</div>
                            29/10/2025 (12:00)
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-body">
                    <h5 class="card-title">Chi tiết các khoản phí</h5>

                    <table class="table table-borderless summary-table">
                        <thead>
                        <tr>
                            <th scope="col">Mô tả</th>
                            <th scope="col" class="text-center">Số lượng</th>
                            <th scope="col" class="text-end">Đơn giá</th>
                            <th scope="col" class="text-end">Thành tiền</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><strong>Tiền phòng</strong> (2 đêm)</td>
                            <td class="text-center">2</td>
                            <td class="text-end">1.500.000</td>
                            <td class="text-end">3.000.000</td>
                        </tr>
                        <tr>
                            <td>Dịch vụ giặt là (28/10)</td>
                            <td class="text-center">1</td>
                            <td class="text-end">250.000</td>
                            <td class="text-end">250.000</td>
                        </tr>
                        <tr>
                            <td>Minibar - Nước suối (28/10)</td>
                            <td class="text-center">2</td>
                            <td class="text-end">20.000</td>
                            <td class="text-end">40.000</td>
                        </tr>
                        <tr>
                            <td>Nhà hàng - Bữa tối (27/10)</td>
                            <td class="text-center">1</td>
                            <td class="text-end">850.000</td>
                            <td class="text-end">850.000</td>
                        </tr>
                        <tr>
                            <td>Phụ thu trả phòng trễ</td>
                            <td class="text-center">1</td>
                            <td class="text-end">500.000</td>
                            <td class="text-end">500.000</td>
                        </tr>
                        </tbody>
                    </table>

                    <hr class="my-2">

                    <div class="px-2">
                        <div class="summary-total">
                            <span class="label">Tổng phụ:</span>
                            <span class="value">4.640.000</span>
                        </div>
                        <div class="summary-total">
                            <span class="label">VAT (8%):</span>
                            <span class="value">371.200</span>
                        </div>
                        <div class="summary-total mb-2">
                            <span class="label">Phí dịch vụ (5%):</span>
                            <span class="value">232.000</span>
                        </div>

                        <hr class="my-1">

                        <div class="summary-total fs-5">
                            <span class="label">TỔNG CỘNG:</span>
                            <span class="value text-primary">5.243.200</span>
                        </div>
                        <div class="summary-total fs-5">
                            <span class="label">Đã thanh toán (Cọc):</span>
                            <span class="value text-success">- 1.000.000</span>
                        </div>

                        <hr class="my-2">

                        <div class="text-end">
                            <span class="text-muted fs-6 me-2">CÒN LẠI PHẢI TRẢ</span>
                            <span class="total-due">4.243.200 VND</span>
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <div class="col-lg-4">
            <div class="card payment-card">
                <div class="card-body">
                    <h5 class="card-title">Xử lý Thanh toán</h5>

                    <div class="text-center mb-3">
                        <label class="form-label">Tổng số tiền cần thanh toán</label>
                        <h2 class="text-danger fw-bold">4.243.200 VND</h2>
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold">Phương thức</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="payCash" value="cash" checked>
                            <label class="form-check-label" for="payCash">
                                <i class="bi bi-cash-coin me-1"></i> Tiền mặt
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="payCard" value="card">
                            <label class="form-check-label" for="payCard">
                                <i class="bi bi-credit-card me-1"></i> Thẻ (POS)
                            </label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="paymentMethod" id="payBank" value="bank">
                            <label class="form-check-label" for="payBank">
                                <i class="bi bi-bank me-1"></i> Chuyển khoản
                            </label>
                        </div>
                    </div>

                    <div id="cashPaymentFields">
                        <div class="mb-3">
                            <label for="cashReceived" class="form-label">Số tiền khách đưa</label>
                            <input type="number" class="form-control form-control-lg" id="cashReceived" placeholder="0">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tiền thối lại</label>
                            <h4 id="cashReturn" class="text-primary fw-bold">0 VND</h4>
                        </div>
                    </div>

                    <div id="cardPaymentFields" style="display: none;">
                        <div class="mb-3">
                            <label for="cardTxnCode" class="form-label">Mã giao dịch POS</label>
                            <input type="text" class="form-control" id="cardTxnCode" placeholder="Nhập mã từ máy POS...">
                        </div>
                    </div>

                    <hr>

                    <div class="d-grid gap-2">
                        <button type="button" class="btn btn-success btn-lg">
                            <i class="bi bi-check-circle me-1"></i> XÁC NHẬN THANH TOÁN & CHECK-OUT
                        </button>
                        <button type="button" class="btn btn-primary">
                            <i class="bi bi-printer me-1"></i> In hóa đơn
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>

</main><script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/main.js"></script>

<script>
    // Logic JS cơ bản để ẩn/hiện trường nhập liệu
    document.querySelectorAll('input[name="paymentMethod"]').forEach(elem => {
        elem.addEventListener("change", function(event) {
            const value = event.target.value;
            document.getElementById('cashPaymentFields').style.display = (value === 'cash') ? 'block' : 'none';
            document.getElementById('cardPaymentFields').style.display = (value === 'card') ? 'block' : 'none';
            // Thêm logic cho 'bank' nếu cần
        });
    });

    // Logic cơ bản tính tiền thối lại
    const totalDue = 4243200; // Lấy giá trị này từ server
    const cashReceivedInput = document.getElementById('cashReceived');
    const cashReturnOutput = document.getElementById('cashReturn');

    cashReceivedInput.addEventListener('input', function(e) {
        const received = parseFloat(e.target.value) || 0;
        const change = received - totalDue;

        if (change >= 0) {
            cashReturnOutput.textContent = change.toLocaleString('vi-VN') + ' VND';
        } else {
            cashReturnOutput.textContent = '0 VND';
        }
    });
</script>

</body>

</html>